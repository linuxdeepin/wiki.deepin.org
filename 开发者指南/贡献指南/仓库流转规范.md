---
title: 仓库流转规范
description: 介绍deepin-community社区仓库
published: true
date: 2022-09-23T06:22:26.466Z
tags: 
editor: markdown
dateCreated: 2022-09-14T08:34:12.543Z
---

# 仓库流转规范
## 一、仓库介绍
### 1、仓库组件说明
####   （1）main(核心组件):
该仓库包含了核心组件以及常用软件包。
仓库所有软件质量得到官方保证。
仓库所有软件包只需依赖main组件即可完成编译、构建和安装使用。
####   （2）community(社区组件):
该仓库是对main组件仓库的补充，为社区提供尽可能丰富的软件包，提供这类软件包供社区爱好者使用，同时明确无法为该类软件包提供bugfix和CVE安全漏洞修复。
受到软件包质量、技术成熟度、社区参与者投入等原因暂时无法完全满足软件包发布的质量要求。
仓库所有软件包无法独立编译、构建和安装使用，需要跟main组件一起使用。
####   （3）commercial(商业组件):
该仓库是对main组件仓库的补充，提供尽可能丰富的软件包。
仓库软件包不是由官方编译构建，软件包兼容系统，并且不破坏仓库中各版本软件包原有的兼容性和依赖关系。受到软件包质量、技术成熟度、社区参与者投入等原因暂时无法完全满足软件包发布的质量要求。
仓库所有软件包无法编译、构建。软件包安装使用，需要跟main组件一起使用。

### 2、规划维护版本说明
 官网维护至少三个发行版本仓库：“稳定版（stable）”、“测试版（testing）”和“不稳定版（unstable）”。
####    （1）稳定版（stable）
Stable包含了官方最近一次发行的软件包。稳定版不会增加新功能，一旦一个版本被发
布，并被标记为“稳定版”，它将只会获得安全更新。也就是说，只有在发布之后被发现了安全
漏洞的软件包才会得到更新。
####    （2）测试版（testing）
Testing 是在 unstable 中经过了一定测试的软件包才会进入testing，这些软件包的版本在
所有已构建的架构上要保持一致，并且不能含有使它们无法安装的依赖关系，与“不稳定版”相
比，它们也必须含有更少的发布缺陷。
####    （3）不稳定版（unstable）
Unstable是当前正在开发中的版本。欢迎使用和测试这些软件包，但需要做好充足的准
备。使用“不稳定版”的优点是您可以一直跟随 GNU/Linux 软件行业的最新技术，缺点是很有可能会出现不同的问题，需要自行去修复。

## 二、仓库流转
### 1、转入unstable
开发者申请创建tag后，CI/CD自动化触发编译，编译成功后会将源码包和二进制包推送至unstable仓库，编译失败则修改后再次触发，直至成功。维护者会不断去发现问题并修复，定期准备修正版本，unstable仓库中的软件包可能会发生多次更新。

### 2、转入testing
  Unstable仓库软件包在满足条件后会重新构建，生成软件包所在仓库地址，由提交人备注测试范围和测试用例等，指派给测试组人员进行测试，若测试通过，可推送至testing仓库。
  已在testing的软件包进行更新，需要在release项目上提交PR，PR修改文件（文件记录源码名称、版本和更新内容等信息），然后进行自动构建，生成软件包所在仓库地址，由提交人备注更新内容、测试范围和测试用例等，指派给测试组人员进行测试，若测试通过，可推送至testing仓库；若测试不通过，打回PR，重新提交。
  
  ![1111_(1).png](/开发者指南/1111_(1).png)
  
### 3、转入stable
根据项目规划，当testing足够成熟时，管理员会开始“冻结”它。具体项目规划会在GitHub上进行公示。
Testing的“冻结”。这意味着所有向testing迁移的软件包都会被暂停，只会接收BUG修复和CVE更新。
当缺陷的数量降低到可接受的最大值时，便会合并testing仓库到stable仓库，然后进行集成测试，测试通过，stable外网发布。

### 4、CVE更新或紧急问题修复
若进行软件包的CVE更新或紧急问题修复，同样也需要在release项目上提交PR，PR修改json文件，然后进行自动构建，生成软件包所在仓库地址，由提交人备注更新内容、修复问题、测试范围和测试用例等，指派给测试组人员进行测试，若测试不通过，打回PR，重新提交；若测试通过，由集成管理员确认，同步推送到testing和stable仓库。

![image_(1).png](/开发者指南/image_(1).png)


### 仓库地址说明
```plain
stable仓库:
deb https://community-packages.deepin.com/beige/ beige main commercial community
testing仓库：
deb [trusted=yes] https://ci.deepin.com/repo/topics/beige/testing/ testing仓库 main 
unstable仓库:
deb [trusted=yes] https://ci.deepin.com/repo/topics/beige/unstable/ unstable main 
```