---
title: KVM详解（三）——KVM创建虚拟机
description: 
published: true
date: 2022-11-23T06:01:49.959Z
tags: 
editor: markdown
dateCreated: 2022-11-23T05:47:41.817Z
---

# KVM详解（三）——KVM创建虚拟机
## 一、安装准备
在前文KVM详解（二）——KVM安装部署中，我们安装了KVM。今天，我们就来创建一个KVM的虚拟机。
要创建KVM的虚拟机，我们首先来为KVM虚拟机挂载一块磁盘。在前文中，我们特意加装了一块30G的磁盘，我们就用该磁盘作为KVM虚拟机的存储设备。执行命令：

```
fsdisk /dev/sdb
mkfs.xfs /dev/sdb1
mount /dev/sdb1 /var/lib/libvirt/images
```

这些命令执行结果如下：

![2022-11-23_83860.png](/2022-11-23_83860.png)

![2022-11-23_29332.png](/2022-11-23_29332.png)

上述命令分别表示对新的磁盘进行分区、对分区安装文件系统（格式化）以及将分区挂载到/var/lib/libvirt/imgaes/目录中。对上述命令还存在困惑的，请查阅以下文章：Linux磁盘管理实战。相信您一定会有所收获！
上述命令执行完毕后，我们可以执行命令：

df -h

结果如下：

![2022-11-23_19127.png](/2022-11-23_19127.png)

可以发现，我们上面的操作成功！
之后，我们需要上传一个虚拟机镜像，在这里，我们上传的是CentOS7的镜像，该镜像大小约为4.3G。在之前的文章中，我们一直使用rz命令来进行上传操作，但是对于这种大小超过4个G的文件而言，我们不能使用rz命令来进行上传。我们可以借助Final下方的FTP上传功能实现，如下所示：

![2022-11-23_45134.png](/2022-11-23_45134.png)

## 二、虚拟机创建

接下来，我们就来创建一个KVM虚拟机。
执行命令：

```bash
virt-manager
```

打开KVM的虚拟机管理页面，选择“New”，结果如下所示：

![2022-11-23_93639.png](/2022-11-23_93639.png)


在弹出的页面中，选择安装方式为“通过本地介质安装”，然后选择“下一步”，如下所示：

![2022-11-23_11865.png](/2022-11-23_11865.png)

之后，我们点击Browse，选择我们刚刚上传的镜像，如下所示：

![2022-11-23_21697.png](/2022-11-23_21697.png)

![2022-11-23_69484.png](/2022-11-23_69484.png)

![2022-11-23_35571.png](/2022-11-23_35571.png)

![2022-11-23_53551.png](/2022-11-23_53551.png)

接下来，我们选择设置虚拟机的内存大小和CPU数量，在这里我们采用默认配置，直接点击“下一步”，如下所示：

![2022-11-23_91750.png](/2022-11-23_91750.png)

接下来，我们选择KVM虚拟机的磁盘大小。在这一步，鉴于我们当前的设备硬件资源不够，因此我在这里选择的磁盘小一些，大家可以根据自身实际情况选择磁盘大小，选择完成后，点击“下一步”，如下所示：

![2022-11-23_54686.png](/2022-11-23_54686.png)

之后，我们填写虚拟机的名字，以及网络设置，如下所示：

![2022-11-23_85271.png](/2022-11-23_85271.png)

这样，我们的虚拟机就开始自动安装了，如下所示：

![2022-11-23_89519.png](/2022-11-23_89519.png)

![2022-11-23_58896.png](/2022-11-23_58896.png)

三、虚拟机安装展示
在KVM虚拟机创建、安装完成后，我们打开该虚拟机，查看安装效果

![2022-11-23_67520.png](/2022-11-23_67520.png)

可以看到，我们的虚拟机安装成功！
