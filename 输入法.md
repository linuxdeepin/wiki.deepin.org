## 输入法的种类

### 输入法框架管理工具

*  当下 Linux 系统上的输入法接口，通常是由 im-config 这个系统工具管理的。im-config 是类似windows下的『输入法切换面板』，MacOS下的『输入源管理器』亦与之相似。

*  在终端中键入：im-config 即可调出它的可视化管理界面。通过它，我们可以方便地在不同的输入法框架下切换。

### 音码

*  音码即是以汉字的发音为根据衍生的汉字编码方式，广泛使用的拼音输入法就是代表。

*  与西方的拼音文字不同，汉字本身不是拼音文字，因此不能与英文键盘完美接洽。非止中文，整个东亚地区的主要文字都不是拼音文字，在国际上中日韩地区因其文字需要特别的处理才能正常使用，在 Unicode 中便划出 CJK 专区来处理相应的字符。

### 形码

*  依据汉字的字形，按照不同的原则拆分汉字的方式。
*  形码种类繁多，代表有86五笔、98五笔、新世纪五笔、09五笔、郑码、仓颉3代、仓颉5代……

### 音形码

*  杂糅音码与形码而成的编码方案，杰出代表有自然码、二笔、小鹤音形。

## 输入法的实现

### 交互原型

*  中文输入法，本质上是一个字典程序。它建立了一套由『字母』到『汉字』的映射，通过响应用户的『键盘事件』实现汉字的『检索』。

### 后端检索引擎

*  通常来讲，只有拥有独立、完整的『后端检索引擎』，才能说是一个独立的『输入法程序』。后端检索引擎的性能，决定了输入法的性能与健壮程度。在Linux上，ibus、fcitx、yong、rime 都是拥有独立『后端检索引擎』的输入法程序。

### 前端皮肤系统

*  不同的系统平台，拥有不同的前端环境。输入法程序的可视部分，都是由对应系统的前端实现的。

*  在写输入法程序时，一个素质良好的程序员应当考虑将『前端』与『后端』设计成相对独立的模块儿，方便跨平台移植与后期维护。以 RIME 为例，现在你能在 Android / iOS / MacOS / Win / Linux 上使用同一份配置文件——尽管在不同的系统平台上，前端实现并不相同。

*  其实，绝大多数操作系统在设计之初都提供了基本的后端检索引擎原型，只需稍微动下手，就可以实现简单的自定义输入法。比如Win上的『输入法生成器』（IME Generator），而MacOS上，则有[《macOS Sierra: Create and use your own input source》](https://support.apple.com/kb/PH25491?viewlocale=en_LA&locale=en_LA)。

*  然而，术业有专攻，操作系统商的精力通常不在输入法上。它们提供的『后端检索引擎』通常性能很差，Win 已放弃维护自己的输入法生成器，MacOS上的『自制输入源』也形同虚设、无人问津。

## 输入法的码表

### 编码格式

*  输入法码表是一份包含了『编码』与『汉字』映射关系的文件。它通常是文本文件，程序在执行时临时转储为二进制文件来提高检索效率。

*  为了 CJK 的大字符集显示需求，也为了与  Unicode 标准正常接轨，通常输入法码表被设计成 GB18030 格式，或者 UTF-8 无BOM 格式。

### 两类码表

*  根据一行之内，汉语词条的数目，可以把码表分为两大类。两大类码表中，『单行单义类』码表因其灵活的扩展性、制作的方便性，成为输入法码表中的主流。

#### 单行单义类码表

*  一行之内，只有一个词条与对应编码，通常还有第三列，即词频。
*  如果不加词频，则默认排在上面的词条优先权高于排在下面的。

```
...
邯	fbh 
邗	fbh 
去	fcu 
云	fcu 
圭	fff 
坩	ffg 
二	fgg 
址	fhg 
...
```
#### 单行多义类码表

*  一行之内，编码可以对应多个词条，词条间的重码从左到右依次排列。
*  在显示重码时，按码表内从左到右的顺序，依次排列重码词条。

```
...
khph 蹿
khpx 跎
khqb 跪
khqi 跳 䟢
khqy 趵 䟡 䠨
khtd 跃 䟯 䠗
khtf 踵 嘑 跦 䟭
khtg 跌 鹭 跭 躌
khti 跞
khtk 踟 蹻
khtl 蹯
khtm 躜 躦
khtp 跹 䟪
khtq 跣
khty 踽
...

```

## 小小输入法

### 安装与卸载

*  下载：

https://drive.google.com/open?id=0BwqjucTD38qrTWI1QnZFM090Z2s  

国内下载：http://yongim.ys168.com/

*  安装：

一：进入程序文件夹下，于此处打终端

$ sudo ./yong-tool.sh --install

$ ./yong-tool.sh --select

二：进入QT插件文件夹下，于此处打开终端

$ sudo ./qt.sh  

如果不安装 QT5 插件，将无法在 QT 程序(deepin 原生软件、QT Creator 等)中使用小小输入法。
详见：https://bbs.deepin.org/forum.php?mod=viewthread&tid=138500

三：重启或注销系统生效

*  卸载：

进入程序文件夹下，于此处打开终端

$ sudo ./yong --uninstall

### 程序结构

*  结构图：[小小输入法-结构图](http://wx1.sinaimg.cn/large/005YTWw6ly1fi8sz9cclxj30pm0lktbb.jpg)
*  小小输入法的程序目录全在解包的文件夹内，因此默认普通用户有完整的读写权限。
*  ctrl+h 可以在 home 目录下找到『.yong』文件夹，里面有一份『yong.ini』，它是用户目录，你可以在这里修改各项配置，程序优先从这里读取用户配置。
*  你若想直接在程序文件夹里修改『yong.ini』，修改之后，请拷贝一份到 home 目录下找的『.yong』文件夹内，覆盖掉原来的配置文件。

### 码表定制

*  码表类型，是典型的『单行多义』类码表。
*  必须在方案码表的第一行声明UTF-8编码，详见内置码表。
*  新增输入法方案到小小输入法平台时，必须在mb文件夹下放置『方案定义』与『方案码表』（ 比如：98WB.ini 和 98WB.txt ），并在『yong.ini』中仿照示例挂单。

## ibus使用与定制

### 安装与卸载
### 程序结构
### 码表定制

## fcitx使用与定制

*  fcitx是linux上比较流行的输入法框架之一，而且提供了码表转制的命令行工具。

$ txt2mb 98wb.txt 98wb.mb

*  将当前目录下的 98wb.txt 这个文本格式的码表，转制成二进制的 98wb.mb ，并将之放到当前目录下。

### 安装与卸载

终端输入

*  安装

$ sudo apt install fcitx fcitx-table

*  切换到fcitx

$ im-config

*  卸载
 
$ sudo apt purge fcitx

### 程序结构



### 码表定制

## rime使用与定制

### 安装与卸载
### 程序结构
### 码表定制