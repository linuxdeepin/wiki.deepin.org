---
title: Deepin的备份恢复
description: 
published: true
date: 2022-10-18T05:44:52.818Z
tags: 备份 恢复
editor: markdown
dateCreated: 2022-08-10T08:31:16.677Z
---

# 一、概述
系统备份还原工具是帮助在操作系统下因人为操作错误、系统软件或应用软件的缺陷、硬件的损毁、电脑病毒、骇客攻击、自然灾害等等诸多因素造成数据缺失，进行数据或系统还原，从而保障系统和软件的正常运行。

# 二、设计目的
1. 当用户要进行不可预测的系统操作或软件操作时进行备份，应对接下来面对失败进行的还原；
2. 当用户未能备份时系统遭受未预料到的损坏能恢复出厂时的设置；
3. 完成送测大纲要求
4. 满足厂商对一键还原硬件指标

# 三、相关功能
![2022-8-10_77607.png](/2022-8-10_77607.png)

# 四、恢复和备份流程

## 初始化备份流程

![2022-8-10_44418.png](/2022-8-10_44418.png)

## 备份流程

![2022-8-10_17139.png](/2022-8-10_17139.png)

## 还原流程

![2022-8-10_74832.png](/2022-8-10_74832.png)

### 初始化备份
当系统全盘安装完成时，立即创建恢复分区，备份启动分区和根分区，保存恢复分区信息、保存磁盘分区配置。

### 控制中心备份
![2022-8-11_61517.png](/2022-8-11_61517.png)
1. 进入”控制中心-系统信息-备份/还原-备份“，点击“...”打开备份需要保存的路径

2. 备份失败将失败原因发送给开发者，提示用户“备份失败，失败原因：xxx”并删除失败的备份文件。备份失败将失败原因发送给开发者，提示用户“备份失败，失败原因：xxx”

3. 备份功能有二种模式：

- 全盘备份：备份全磁盘系统文件和用户产生的文件。
  
- 系统备份：备份根分区、启动分区

4. 全盘备份无法备份在自己的磁盘里，只能备份在其它存储介质，系统备份则备份在默认位置，如果磁盘空间不足请提示，允许用户可以手 动放在可以存放的磁盘位置。

5. 点击“备份”，弹出密码输入框，输入密码正确后开始计算备份的容量是否满足存放磁盘的空间的容量，如果不满足则提示“磁盘空间不足”。

6. 备份还原开启后，配置文件写入完毕后，立即重启进入 live 系统进行备份

7. 备份时需记录磁盘唯一标识，用于还原时磁盘更换提醒

8. 备份文件成功后需写入此次备份对应信息，写入失败需提示“写入备份信息失败”

9. 准备备份中，若找不到当前系统所在的磁盘需提示“找不到当前操作系统所在磁盘”

10. 开始备份时，遇到异常终止启动备份需提示“创建任务失败”

11. 点击备份后，需修改系统一系列配置，显示“正在配置中...”提示

12. 备份的存储介质文件系统不支持需提示“该存储介质的文件系统不支持备份”。目前支持的格式有 "ext4", "ntfs","xfs", "btrfs", "reiserfs", "exfat"

# 五、Grub进入还原流程

![2022-8-11_10908.png](/2022-8-11_10908.png)

1. 开机时选择系统界面添加“Deepin Restore”选项

2. 选择恢复的文件需要验证准确性，如果验证失败提示“备份文件有误”。

3. 当选择“恢复出厂设置”读取恢复出厂设置备份。

4. 当选择“恢复历史备份”打开文件目录选取要还原的备份。

5. 当选择保留个人数据，则将保留用户磁盘中已存在的数据

6. 当选择“自定义恢复”可以从其他路径或磁盘分区选择已备份的文件

7. 系统还原失败后，提示用户还原失败，将失败原因发送给开发者。

8. 还原系统时，提示用户“系统还原将失去现有系统数据”。

9. 备份文件不会跟随还原丢失。

10. 选择的备份文件与备份时的磁盘信息不一致时，提示“磁盘信息与备份信息不一致，无法进行还原”并终止还原。

11. 准备还原中，若找不到当前系统所在的磁盘需提示“找不到当前操作系统所在磁盘”。

12. 开始还原时，遇到异常终止启动还原需提示“创建任务失败”。

13. 未进行还原操作时请点击右上角“x”，重启计算机，进行操作时，隐藏“x”防止用户退出导致还原失败。


